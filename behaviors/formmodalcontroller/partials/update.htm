<?= Form::open(['id'=>'updateForm']) ?>
	<input type="hidden" name="record_id" value="<?= $record_id ?>" />

	<div class="modal-header">
		<button type="button" class="close" data-dismiss="popup">&times;</button>
		<h4 class="modal-title"><?= $this->pageTitle ?></h4>
	</div>

	<?php if (!$this->fatalError): ?>
		<div class="modal-body"><?= $this->formRender() ?></div>

		<div class="modal-footer">
			<button type="submit" data-request="onUpdate" data-request-data="redirect:0" data-hotkey="ctrl+s, cmd+s" data-popup-load-indicator class="btn btn-primary">
				<?= preg_replace('/([Ss])/', '<u>$1</u>', trans('backend::lang.form.save'), 1) ?>
			</button>
			<button type="button" class="btn btn-default" data-dismiss="popup"><?= trans('backend::lang.form.cancel') ?></button>
			<button type="button" class="oc-icon-trash-o btn-icon danger pull-left" data-request="onDelete" data-popup-load-indicator
				data-request-confirm="<?= trans('backend::lang.form.action_confirm') ?>"></button>
		</div>
	<?php else: ?>
		<div class="modal-body">
			<p class="flash-message static error"><?= trans($this->fatalError) ?></p>
		</div>

		<div class="modal-footer">
			<button type="button" class="btn btn-default" data-dismiss="popup"><?= trans('backend::lang.form.close') ?></button>
		</div>
	<?php endif ?>

	<script>
		setTimeout( function(){ $('#updateForm input.form-control:first').focus(); }, 300);
	</script>
<?= Form::close() ?>